(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"1d0e":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={uniPopup:function(){return n.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(n.bind(null,"3dad"))}},s=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.isScroll=!0},e.e1=function(t){e.isScroll=!1})},i=[]},"32c2":function(e,t,n){},"7a94":function(e,t,n){"use strict";n.r(t);var o=n("a51f"),s=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=s.a},8028:function(e,t,n){"use strict";var o=n("32c2"),s=n.n(o);s.a},a51f:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{rewardedVideoAd:null,num:3,scrollTop:9999,isScroll:!0,userAvatar:"../../static/user.png",apiurl:"https://api.mmlovecc.cc/api/api.php",apisucc:!0,apibut:"api检测中,请稍等...",api:"",msgLoad:!1,anData:{},isRequesting:!1,animationData:{},showTow:!0,msgList:[{my:!1,msg:"你好，我是小毛，有什么想和我说的吗？"}],msgContent:"",msg:""}},computed:{sentext:function(){return"发送(".concat(this.num,"次)")}},onShareAppMessage:function(t){this.num=5,e.setStorageSync("user-num",this.num)},onLoad:function(){var t=this;wx.login({success:function(t){if(t.code){var n=JSON.stringify({code:t.code});e.request({url:"https://api.mmlovecc.cc/api/login.php",data:n,method:"POST"}),console.log("code:"+t.code)}else console.log("登录失败！"+t.errMsg)}}),wx.createRewardedVideoAd&&(this.rewardedVideoAd=wx.createRewardedVideoAd({adUnitId:""}),this.rewardedVideoAd.onLoad((function(){console.log("onLoad event emit")})),this.rewardedVideoAd.onError((function(e){console.log("onError event emit",e)})),this.rewardedVideoAd.onClose((function(e){console.log("onClose event emit",e),e.isEnded&&(t.num=5)}))),wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]});void 0!==e.getStorageSync("user-avatar")&&(this.userAvatar=e.getStorageSync("user-avatar")),0===e.getStorageSync("user-num")||1===e.getStorageSync("user-num")||2===e.getStorageSync("user-num")||3===e.getStorageSync("user-num")||4===e.getStorageSync("user-num")||5===e.getStorageSync("user-num")?this.num=e.getStorageSync("user-num"):this.num=3;try{e.getStorageSync("sk")}catch(n){console.log(n)}},methods:{copyText:function(t){e.setClipboardData({data:t,success:function(){e.showToast({title:"已复制到剪贴板",icon:"none",position:"top"})}})},setsklocal:function(t){e.setStorage({key:"sk",data:t,success:function(e){console.log("success",e)}})},onChooseAvatar:function(t){e.setStorageSync("user-avatar",t.detail.avatarUrl),setTimeout((function(){e.navigateTo({url:"/pages/index/index"})}),300)},clopop:function(){this.$refs.popup.close("center")},openpop:function(){this.$refs.popup.open("center")},apiset:function(){this.apibut="api检测中,请稍等...";var t=JSON.stringify({body:"你好"});e.request({url:this.apiurl,data:t,method:"POST"})},sendMsg:function(){var t=this;if(this.num<=0)return this.msgList.push({msg:"您的次数已用尽，分享可获得次数。",my:!1}),void this.rewardedVideoAd.show();if(""==this.msg)return 0;if(1==this.msgLoad)return this.$u.toast("请先配置api再进行使用"),0;this.msgContent+="YOU:"+this.msg+"\n";var n=JSON.stringify({body:this.msg});console.log(n),e.request({url:"https://api.mmlovecc.cc/api/check.php",data:n,method:"POST",success:function(o){var s=o.data;if(console.log(s),0==s)return wx.showToast({title:"您发送的内容含有违法违规内容，请重新提问。",icon:"none",duration:1e3}),t.isRequesting=!1,t.msgLoad=!1,0;t.isRequesting=!0,t.msgList.push({msg:t.msg,my:!0}),t.msgContent+="YOU:"+t.msg+"\n",console.log(t.msgContent),t.msgLoad=!0,t.msg="",e.request({url:t.apiurl,data:n,method:"POST",success:function(n){var o=n.data.choices[0].text.replace("openai:","").replace("openai：","").replace(/^\n|\n$/g,"");console.log(o),t.msgList.push({msg:o,my:!1}),t.isRequesting=!1,t.num--,t.msgContent+=o+"\n",t.msgLoad=!1,e.setStorageSync("user-num",t.num),t.scrollToBottom()},fail:function(e){console.log(3344444,"失败")}})}})},scrollToBottom:function(){var e=this;setTimeout((function(){e.scrollTop++}),500)}}};t.default=n}).call(this,n("543d")["default"])},b7e0:function(e,t,n){"use strict";(function(e){n("4daa");o(n("66fd"));var t=o(n("d0a7"));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])},d0a7:function(e,t,n){"use strict";n.r(t);var o=n("1d0e"),s=n("7a94");for(var i in s)"default"!==i&&function(e){n.d(t,e,(function(){return s[e]}))}(i);n("8028");var a,u=n("f0c5"),r=Object(u["a"])(s["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);t["default"]=r.exports}},[["b7e0","common/runtime","common/vendor"]]]);